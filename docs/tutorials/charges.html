<!DOCTYPE html>
<html lang="en">

<!-- Mirrored from stripe.com/docs/tutorials/charges by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 09 Feb 2015 07:33:04 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Making your first charge</title>
    <link rel="stylesheet" type="text/css" href="../../assets/site-ea99019a1bc27872a48d1149a4785b01.css" media="screen" />
    <script type="text/javascript">
        var _sf_startpt=(new Date()).getTime()
        var APIValues = {};
    </script>
    <script type="application/json" id="mixpanel_config">{&quot;identifier&quot;:&quot;eb71b6171a4f7ed97de9b7a0395b7ca5&quot;}</script>
<script type="application/json" id="analytics_config">{}</script>
<script src="../../../www.googleadservices.com/pagead/f.txt"></script>
<script src="../../assets/external_analytics-a9e3d39cd6110aa8c184d9c1f2e5777e.js"></script>
<script src="../../assets/qframe-cb903dc9166e266dc7d9f11d44f5e81a.js"></script>

    <link rel="shortcut icon" href="https://stripe.com/favicon.ico">

    <!--[if lt IE 9]>
    <script src="/assets/html5shiv-17761200a17ebcb716dda86cca6d2472.js"></script>
    <![endif]-->
    <script type="text/javascript" src="../../../use.typekit.net/gbh7uto.js"></script>
    <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
    
</head>
<body id="documentation">

  <div id="header">
    <h1><a href="https://stripe.com/">Stripe</a></h1>
    <div class="navigation">
    <div class="signin"><a id='signin' href="https://dashboard.stripe.com/login"><span>Sign In</span></a></div>

  <ul class="global">
    <li><a href="https://stripe.com/docs" class="selected">Documentation</a></li>
    <li><a href="https://support.stripe.com/">Help &amp; Support</a></li>
  </ul>
</div>

  </div><!-- #header -->

  <section id="doc">

    <nav>

      <h1 class="getting-started">Documentation</h1>
      <ul>
        <li class="unselected">
          <a href="https://stripe.com/docs">Getting Started</a>
        </li>
          <li class="unselected sub">
            <a href="checkout.html">Embedded Form</a>
          </li>
          <li class="unselected sub">
            <a href="forms.html">Custom Forms</a>
          </li>
          <li class="unselected sub">
            <a href="../mobile.html">Mobile Apps</a>
          </li>

        <li class="selected">
          <a href="charges.html">Charging Cards</a>
        </li>

        <li class="unselected">
          <a href="sending-transfers.html">Sending Transfers</a>
        </li>

        <li class="unselected">
          <a href="dashboard.html">Your Account</a>
        </li>
      </ul>

      <h1 class="references">References</h1>
      <ul>
        <li class="unselected">
          <a href="../stripe.html">Stripe.js</a>
        </li>
        <li class="unselected">
          <a href="../checkout.html">Checkout</a>
        </li>
        <li class="unselected">
          <a href="../webhooks.html">Webhooks</a>
        </li>
        <li class="unselected">
          <a href="../fraud.html">Fraud Protection</a>
        </li>
        <li class="unselected">
          <a href="../testing.html">Testing</a>
        </li>
        <li class="unselected">
          <a href="../examples.html">Examples</a>
        </li>
        <li class="unselected">
          <a href="../upgrades.html">API Upgrades</a>
        </li>
        <li class="unselected">
          <a href="../libraries.html">API Libraries</a>
        </li>
        <li class="unselected">
          <a href="../guides/file-upload.html">File Upload Guide</a>
        </li>
        <li class="unselected">
          <a href="../api.html" class="external" target="_blank">
            Full API Reference
          </a>
        </li>
      </ul>

      <h1 class="subscriptions">Subscriptions</h1>
      <ul>
        <li class="unselected">
          <a href="../subscriptions.html">Overview</a>
        </li>
        <li class="unselected">
          <a href="subscriptions.html">Getting Started</a>
        </li>
        <li class="unselected">
          <a href="../guides/subscriptions.html">Integration Guide</a>
        </li>
      </ul>

      <h1 class="connect">Connect</h1>
      <ul>
        <li class="unselected">
          <a href="../connect.html">Overview</a>
        </li>
        <li class="unselected">
          <a href="../connect/getting-started.html">Getting Started</a>
        </li>
        <li class="unselected">
          <a href="../connect/oauth.html">Integrating OAuth</a>
        </li>
        <li class="unselected">
          <a href="../connect/collecting-fees.html">Collecting Fees</a>
        </li>
        <li class="unselected">
          <a href="../connect/shared-customers.html">Shared Customers</a>
        </li>
        <li class="unselected">
          <a href="../connect/reference.html">Reference</a>
        </li>
      </ul>

      <h1 class="disputes">Disputes</h1>
      <ul>
        <li class="unselected">
          <a href="https://stripe.com/help/disputes-overview">Overview</a>
        </li>
        <li class="unselected">
          <a href="../guides/dispute-evidence.html">Submitting Evidence</a>
        </li>
        <li class="unselected">
          <a href="https://stripe.com/help/dispute-types">Dispute Types</a>
        </li>
        <li class="unselected">
          <a href="https://stripe.com/help/disputes">FAQ</a>
        </li>
      </ul>


      <h1 class="faq"><abbr title="Frequently Asked Questions">FAQ</abbr></h1>
      <ul>
        <li class="unselected">
          <a href="https://stripe.com/help/transfers">Getting Paid</a>
        </li>
        <li class="unselected">
          <a href="https://stripe.com/help/ssl">SSL/TLS</a>
        </li>
        <li class="unselected">
          <a href="https://stripe.com/help/security">Security</a>
        </li>
      </ul>

      <h1 class="more">More</h1>
      <ul>
        <li class="unselected">
          <a href="https://stripe.com/help/contact">Contact</a>
        </li>
        <li class="unselected">
          <a href="https://stripe.com/global">Global Users</a>
        </li>
        <li class="unselected">
          <a href="https://stripe.com/gallery">Gallery</a>
        </li>
        <li class="last unselected">
          <a href="../integrations.html">Integrations</a>
        </li>
      </ul>

    </nav>

    <section id="content">
      <section id="details">

  <header>
    <h1>Making your first charge</h1>
    <p>
      In this tutorial you'll make your first charge on Stripe.
      If you need help, check out our answers to <a href="https://support.stripe.com/">common questions</a> or chat live with other developers in #stripe on freenode.

    </p>
  </header>

  <article>

    <aside class="intro note">
      <h1>Tutorial requirement</h1>
      <p>
        In order to finish this tutorial, you'll need to have already collected your user's credit
        card info.
      </p>
      <p>
        If you haven't, check out our <a href="cards.html">receiving cards docs</a>.
      </p>
    </aside>

    <p>
      You've got the token for your user's credit card details, now what? Now you charge them money. This happens
      on your server, and the fastest way to do it is by using one of our <a
      href="../libraries.html">client libraries</a>. If you haven't already,
      install your favorite language now. In this tutorial, we'll show code for <code>Ruby</code>,
      <code>PHP</code>, <code>Python</code>, and <code>Node</code>.
    </p>

    <p>
      In your web server, grab the Stripe token in the POST parameters submitted by your form.
      Once you do, it's one simple call to charge the card with Stripe:
    </p>

    <section class="code-example">
      <nav class="lang-control">
        <a href="https://stripe.com/docs/tutorials/.">ruby</a>
        <a href="https://stripe.com/docs/tutorials/.">python</a>
        <a href="https://stripe.com/docs/tutorials/.">php</a>
        <a href="https://stripe.com/docs/tutorials/.">node</a>
      </nav>
      <div class="terminal-wrap" data-action="tutorial_charge_create">
        <pre><code><div class="terminal"></div></code></pre>
      </div>
    </section>

    <p>
      Also note that we've placed your <strong>test secret</strong> API key in the code. This will
      authenticate you to Stripe, and it's separate from your publishable key &mdash; keep it secret and keep it safe.
      Remember to replace the test key with your live key in production.
      You can get all your keys from <a href="https://dashboard.stripe.com/account/apikeys">your account page</a>.
    </p>

    <aside class="content note">
    <h1>Note</h1>
    <p>
      Charging cards with Stripe is synchronous.
      You <strong>do not need</strong> any asynchronous webhook/IPN handling to see if a charge has succeeded.
    </p>
    </aside>

    <p>
      That's it! If the charge creation request succeeds, and doesn't throw an error, the card has been successfully charged.
      You will receive your money in <a href="https://stripe.com/help/transfers#when-and-how-do-i-get-paid">
      two days</a>.
    </p>

    <h1 id="saving-credit-card-details-for-later">Saving credit card details for later</h1>

    <p>
      Stripe tokens can only be used once, but that doesn't mean you can't save payment information
      for your users. Stripe provides a <code>Customer</code> abstraction that makes it easy to save
      this information for later.
    </p>

    <p>
      Instead of charging the card immediately, you can create a new <code>Customer</code>
      object and save the card to that customer. This will let you charge the user at any point in
      the future:
    </p>

    <section class="code-example">
      <nav class="lang-control">
        <a href="https://stripe.com/docs/tutorials/.">ruby</a>
        <a href="https://stripe.com/docs/tutorials/.">python</a>
        <a href="https://stripe.com/docs/tutorials/.">php</a>
        <a href="https://stripe.com/docs/tutorials/.">node</a>
      </nav>
      <div class="terminal-wrap" data-action="tutorial_customer_create_and_charge">
        <pre><code><div class="terminal"></div></code></pre>
      </div>
    </section>

    <p>
      In this example, right after we created the customer we still created a new charge by passing
      in the customer, rather than the card. You can always provide either a card or a customer when
      creating a new charge.
    </p>

  </article>

  <footer>
    <section id="next">
      <h1>Next up</h1>
      <p>
        Congrats! You've gone through the basics of using Stripe. Some things you might want to
        see next:
      </p>
      <ul>
        <li><a href="dashboard.html">Managing your Stripe account</a></li>
        <li><a href="../examples.html">Sample projects using Stripe</a></li>
        <li><a href="../api.html">Full API Documentation</a></li>
      </ul>
    </section>

    <section id="questions">
      <h1>Questions?</h1>
      <p>We're always happy to help with code or other questions you might have! Check out our answers to <a href="https://support.stripe.com/">common questions</a> or chat live with other developers in #stripe on freenode.</p>

    </section>
  </footer>
</section>


    </section>

  </section><!-- #documentation -->

  <div id="footer">
    <div class="country-dropdown-view">
        <a class="select">
            <span>
                <img src="../../img/flags/us.png" width="23" height="17" data-hires="true" />
                <strong>United States</strong>
            </span>
        </a>

        <div class="popover">
            <div class="arrow"></div>
            <h4>Select your Country</h4>
            <ul>
                    <li>
                        <a href="https://stripe.com/country?country=AU&amp;redirect=/docs/tutorials/charges" >
                            <img src="../../img/flags/au.png" width="23" height="17" data-hires="true" />
                            <span>Australia</span>
                        </a>
                    </li>
                    <li>
                        <a href="https://stripe.com/country?country=CA&amp;redirect=/docs/tutorials/charges" >
                            <img src="../../img/flags/ca.png" width="23" height="17" data-hires="true" />
                            <span>Canada</span>
                        </a>
                    </li>
                    <li>
                        <a href="https://stripe.com/country?country=GB&amp;redirect=/docs/tutorials/charges" >
                            <img src="../../img/flags/gb.png" width="23" height="17" data-hires="true" />
                            <span>United Kingdom</span>
                        </a>
                    </li>
                    <li>
                        <a href="https://stripe.com/country?country=IE&amp;redirect=/docs/tutorials/charges" >
                            <img src="../../img/flags/ie.png" width="23" height="17" data-hires="true" />
                            <span>Ireland</span>
                        </a>
                    </li>
                    <li>
                        <a href="https://stripe.com/country?country=US&amp;redirect=/docs/tutorials/charges" class="selected">
                            <img src="../../img/flags/us.png" width="23" height="17" data-hires="true" />
                            <span>United States</span>
                        </a>
                    </li>
                    <li>
                        <a href="https://stripe.com/country?country=AT&amp;redirect=/docs/tutorials/charges" >
                            <img src="../../img/flags/at.png" width="23" height="17" data-hires="true" />
                            <span>Austria</span>
                        </a>
                    </li>
                    <li>
                        <a href="https://stripe.com/country?country=BE&amp;redirect=/docs/tutorials/charges" >
                            <img src="../../img/flags/be.png" width="23" height="17" data-hires="true" />
                            <span>Belgium</span>
                        </a>
                    </li>
                    <li>
                        <a href="https://stripe.com/country?country=DK&amp;redirect=/docs/tutorials/charges" >
                            <img src="../../img/flags/dk.png" width="23" height="17" data-hires="true" />
                            <span>Denmark</span>
                        </a>
                    </li>
                    <li>
                        <a href="https://stripe.com/country?country=FI&amp;redirect=/docs/tutorials/charges" >
                            <img src="../../img/flags/fi.png" width="23" height="17" data-hires="true" />
                            <span>Finland</span>
                        </a>
                    </li>
                    <li>
                        <a href="https://stripe.com/country?country=FR&amp;redirect=/docs/tutorials/charges" >
                            <img src="../../img/flags/fr.png" width="23" height="17" data-hires="true" />
                            <span>France</span>
                        </a>
                    </li>
                    <li>
                        <a href="https://stripe.com/country?country=DE&amp;redirect=/docs/tutorials/charges" >
                            <img src="../../img/flags/de.png" width="23" height="17" data-hires="true" />
                            <span>Germany</span>
                        </a>
                    </li>
                    <li>
                        <a href="https://stripe.com/country?country=IT&amp;redirect=/docs/tutorials/charges" >
                            <img src="../../img/flags/it.png" width="23" height="17" data-hires="true" />
                            <span>Italy</span>
                        </a>
                    </li>
                    <li>
                        <a href="https://stripe.com/country?country=LU&amp;redirect=/docs/tutorials/charges" >
                            <img src="../../img/flags/lu.png" width="23" height="17" data-hires="true" />
                            <span>Luxembourg</span>
                        </a>
                    </li>
                    <li>
                        <a href="https://stripe.com/country?country=NL&amp;redirect=/docs/tutorials/charges" >
                            <img src="../../img/flags/nl.png" width="23" height="17" data-hires="true" />
                            <span>Netherlands</span>
                        </a>
                    </li>
                    <li>
                        <a href="https://stripe.com/country?country=NO&amp;redirect=/docs/tutorials/charges" >
                            <img src="../../img/flags/no.png" width="23" height="17" data-hires="true" />
                            <span>Norway</span>
                        </a>
                    </li>
                    <li>
                        <a href="https://stripe.com/country?country=ES&amp;redirect=/docs/tutorials/charges" >
                            <img src="../../img/flags/es.png" width="23" height="17" data-hires="true" />
                            <span>Spain</span>
                        </a>
                    </li>
                    <li>
                        <a href="https://stripe.com/country?country=SE&amp;redirect=/docs/tutorials/charges" >
                            <img src="../../img/flags/se.png" width="23" height="17" data-hires="true" />
                            <span>Sweden</span>
                        </a>
                    </li>
                    <li>
                        <a href="https://stripe.com/country?country=CH&amp;redirect=/docs/tutorials/charges" >
                            <img src="../../img/flags/ch.png" width="23" height="17" data-hires="true" />
                            <span>Switzerland</span>
                        </a>
                    </li>
          </ul>
        </div>
    </div>


    <p><a href="https://stripe.com/">&copy; Stripe</a></p>

    <ul>
        <li><a href="https://status.stripe.com/"><span>System Status</span></a></li>
        <li><a href="https://stripe.com/about">About</a></li>
        <li><a href="https://stripe.com/blog"><span>Blog</span></a></li>
        <li><a href="https://stripe.com/jobs"><span>Jobs</span></a></li>
        <li><a href="http://twitter.com/stripe">Twitter</a></li>
    </ul>
    <ul class="lesser">
        <li><a href="https://stripe.com/terms">Terms of Service</a></li>
        <li><a href="https://stripe.com/privacy">Privacy Policy</a></li>
    </ul>
</div>
<div class="country-dropdown-overlay"></div>

    <script src="../../assets/jquery-47d53801b9f61ca8a21dcc2571aeb3ec.js"></script>
    <script src="../../assets/shared-3abadcaa3af6e785a085062e45894014.js"></script>

<script src="../../assets/footer_analytics-6e8fc3677422b1ab0ef7aca057103605.js"></script>

<noscript>
  <div style="display:inline;">
  <img height="1" width="1" style="border-style:none;" alt="" src="https://googleads.g.doubleclick.net/pagead/viewthroughconversion/1008370075/?value=0&amp;guid=ON&amp;script=0"/>
  </div>
</noscript>


    <script src="../../assets/tutorial-157e244e708a25090e620c16535e5350.js"></script>
  <script type="text/javascript">
      var APIValues = {};
          APIValues["ruby"] = {};
              APIValues["ruby"]["tutorial_charge_create"] = "\u003Cspan class=\"highlight_js ruby\"\u003E# Set your secret key: remember to change this to your live secret key in production\n# See your keys here https://dashboard.stripe.com/account\nStripe.api_key = \u0026quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2\u0026quot;\n\n# Get the credit card details submitted by the form\ntoken = params[:stripeToken]\n\n# Create the charge on Stripe\u0026#39;s servers - this will charge the user\u0026#39;s card\nbegin\n  charge = Stripe::Charge.create(\n    :amount =\u0026gt; 1000, # amount in cents, again\n    :currency =\u0026gt; \u0026quot;usd\u0026quot;,\n    :card =\u0026gt; token,\n    :description =\u0026gt; \u0026quot;payinguser@example.com\u0026quot;\n  )\nrescue Stripe::CardError =\u0026gt; e\n  # The card has been declined\nend\u003C/span\u003E";
              APIValues["ruby"]["tutorial_customer_create_and_charge"] = "\u003Cspan class=\"highlight_js ruby\"\u003E# Set your secret key: remember to change this to your live secret key in production\n# See your keys here https://dashboard.stripe.com/account\nStripe.api_key = \u0026quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2\u0026quot;\n\n# Get the credit card details submitted by the form\ntoken = params[:stripeToken]\n\n# Create a Customer\ncustomer = Stripe::Customer.create(\n  :card =\u0026gt; token,\n  :description =\u0026gt; \u0026quot;payinguser@example.com\u0026quot;\n)\n\n# Charge the Customer instead of the card\nStripe::Charge.create(\n    :amount =\u0026gt; 1000, # in cents\n    :currency =\u0026gt; \u0026quot;usd\u0026quot;,\n    :customer =\u0026gt; customer.id\n)\n\n# Save the customer ID in your database so you can use it later\nsave_stripe_customer_id(user, customer.id)\n\n# Later...\ncustomer_id = get_stripe_customer_id(user)\n\nStripe::Charge.create(\n  :amount   =\u0026gt; 1500, # $15.00 this time\n  :currency =\u0026gt; \u0026quot;usd\u0026quot;,\n  :customer =\u0026gt; customer_id\n)\u003C/span\u003E";
          APIValues["python"] = {};
              APIValues["python"]["tutorial_charge_create"] = "\u003Cspan class=\"highlight_js python\"\u003E# Set your secret key: remember to change this to your live secret key in production\n# See your keys here https://dashboard.stripe.com/account\nstripe.api_key = \u0026quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2\u0026quot;\n\n# Get the credit card details submitted by the form\ntoken = request.POST[\u0026#39;stripeToken\u0026#39;]\n\n# Create the charge on Stripe\u0026#39;s servers - this will charge the user\u0026#39;s card\ntry:\n  charge = stripe.Charge.create(\n      amount=1000, # amount in cents, again\n      currency=\u0026quot;usd\u0026quot;,\n      card=token,\n      description=\u0026quot;payinguser@example.com\u0026quot;\n  )\nexcept stripe.CardError, e:\n  # The card has been declined\n  pass\u003C/span\u003E";
              APIValues["python"]["tutorial_customer_create_and_charge"] = "\u003Cspan class=\"highlight_js python\"\u003E# Set your secret key: remember to change this to your live secret key in production\n# See your keys here https://dashboard.stripe.com/account\nstripe.api_key = \u0026quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2\u0026quot;\n\n# Get the credit card details submitted by the form\ntoken = request.POST[\u0026#39;stripeToken\u0026#39;]\n\n# Create a Customer\ncustomer = stripe.Customer.create(\n    card=token,\n    description=\u0026quot;payinguser@example.com\u0026quot;\n)\n\n# Charge the Customer instead of the card\nstripe.Charge.create(\n    amount=1000, # in cents\n    currency=\u0026quot;usd\u0026quot;,\n    customer=customer.id\n)\n\n# Save the customer ID in your database so you can use it later\nsave_stripe_customer_id(user, customer.id)\n\n# Later...\ncustomer_id = get_stripe_customer_id(user)\n\nstripe.Charge.create(\n    amount=1500, # $15.00 this time\n    currency=\u0026quot;usd\u0026quot;,\n    customer=customer_id\n)\u003C/span\u003E";
          APIValues["php"] = {};
              APIValues["php"]["tutorial_charge_create"] = "\u003Cspan class=\"highlight_js php\"\u003E// Set your secret key: remember to change this to your live secret key in production\n// See your keys here https://dashboard.stripe.com/account\nStripe::setApiKey(\u0026quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2\u0026quot;);\n\n// Get the credit card details submitted by the form\n$token = $_POST[\u0026#39;stripeToken\u0026#39;];\n\n// Create the charge on Stripe\u0026#39;s servers - this will charge the user\u0026#39;s card\ntry {\n$charge = Stripe_Charge::create(array(\n  \u0026quot;amount\u0026quot; =\u0026gt; 1000, // amount in cents, again\n  \u0026quot;currency\u0026quot; =\u0026gt; \u0026quot;usd\u0026quot;,\n  \u0026quot;card\u0026quot; =\u0026gt; $token,\n  \u0026quot;description\u0026quot; =\u0026gt; \u0026quot;payinguser@example.com\u0026quot;)\n);\n} catch(Stripe_CardError $e) {\n  // The card has been declined\n}\u003C/span\u003E";
              APIValues["php"]["tutorial_customer_create_and_charge"] = "\u003Cspan class=\"highlight_js php\"\u003E// Set your secret key: remember to change this to your live secret key in production\n// See your keys here https://dashboard.stripe.com/account\nStripe::setApiKey(\u0026quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2\u0026quot;);\n\n// Get the credit card details submitted by the form\n$token = $_POST[\u0026#39;stripeToken\u0026#39;];\n\n// Create a Customer\n$customer = Stripe_Customer::create(array(\n  \u0026quot;card\u0026quot; =\u0026gt; $token,\n  \u0026quot;description\u0026quot; =\u0026gt; \u0026quot;payinguser@example.com\u0026quot;)\n);\n\n// Charge the Customer instead of the card\nStripe_Charge::create(array(\n  \u0026quot;amount\u0026quot; =\u0026gt; 1000, # amount in cents, again\n  \u0026quot;currency\u0026quot; =\u0026gt; \u0026quot;usd\u0026quot;,\n  \u0026quot;customer\u0026quot; =\u0026gt; $customer-\u0026gt;id)\n);\n\n// Save the customer ID in your database so you can use it later\nsaveStripeCustomerId($user, $customer-\u0026gt;id);\n\n// Later...\n$customerId = getStripeCustomerId($user);\n\nStripe_Charge::create(array(\n  \u0026quot;amount\u0026quot;   =\u0026gt; 1500, # $15.00 this time\n  \u0026quot;currency\u0026quot; =\u0026gt; \u0026quot;usd\u0026quot;,\n  \u0026quot;customer\u0026quot; =\u0026gt; $customerId)\n);\u003C/span\u003E";
          APIValues["node"] = {};
              APIValues["node"]["tutorial_charge_create"] = "\u003Cspan class=\"highlight_js javascript\"\u003E// Set your secret key: remember to change this to your live secret key in production\n// See your keys here https://dashboard.stripe.com/account\nvar stripe = require(\u0026quot;stripe\u0026quot;)(\u0026quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2\u0026quot;);\n\n// (Assuming you\u0026#39;re using express - expressjs.com)\n// Get the credit card details submitted by the form\nvar stripeToken = request.body.stripeToken;\n\nvar charge = stripe.charges.create({\n  amount: 1000, // amount in cents, again\n  currency: \u0026quot;usd\u0026quot;,\n  card: stripeToken,\n  description: \u0026quot;payinguser@example.com\u0026quot;\n}, function(err, charge) {\n  if (err \u0026amp;\u0026amp; err.type === \u0026#39;StripeCardError\u0026#39;) {\n    // The card has been declined\n  }\n});\u003C/span\u003E";
              APIValues["node"]["tutorial_customer_create_and_charge"] = "\u003Cspan class=\"highlight_js javascript\"\u003E// Set your secret key: remember to change this to your live secret key in production\n// See your keys here https://dashboard.stripe.com/account\nvar stripe = require(\u0026quot;stripe\u0026quot;)(\u0026quot;sk_test_BQokikJOvBiI2HlWgH4olfQ2\u0026quot;);\n\n// (Assuming you\u0026#39;re using express - expressjs.com)\n// Get the credit card details submitted by the form\nvar stripeToken = request.body.stripeToken;\n\nstripe.customers.create({\n  card: stripeToken,\n  description: \u0026#39;payinguser@example.com\u0026#39;\n}).then(function(customer) {\n  return stripe.charges.create({\n    amount: 1000, // amount in cents, again\n    currency: \u0026quot;usd\u0026quot;,\n    customer: customer.id\n  });\n}).then(function(charge) {\n  saveStripeCustomerId(user, charge.customer);\n});\n\n// Later...\nvar customerId = getStripeCustomerId(user);\n\nstripe.charges.create({\n  amount: 1500, // amount in cents, again\n  currency: \u0026quot;usd\u0026quot;,\n  customer: customerId\n});\u003C/span\u003E";
  </script>


  <script src="../../assets/documentation-6a120856de81b5511bf1790365f19166.js"></script>
  <script src="../../assets/highlight.pack-8bd9d9dd93b5ef1f95e855d7641494d2.js"></script>
<script src="../../assets/highlighter-1268244f129b69592ca48d0f0f198cac.js"></script>

  <script type="text/javascript">
    Analytics.page("docs");
  </script>
</body>

<!-- Mirrored from stripe.com/docs/tutorials/charges by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 09 Feb 2015 07:33:05 GMT -->
</html>
